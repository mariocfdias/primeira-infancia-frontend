<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Panorama de Missões do Pacto Cearense da Primeira Infância">
    <title>Panorama de Missões</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="mission-panorama.css">
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Test progress bar -->
    <div class="container mt-3 mb-3">
        <h5>Test Progress Bar</h5>
        <div class="progress" style="position: relative; height: 15px; margin-bottom: 10px; width: 100%;">
            <div class="progress-bar" 
                 role="progressbar" 
                 style="width: 65%; background: linear-gradient(to right, #50B755, #066829);" 
                 aria-valuenow="65" 
                 aria-valuemin="0" 
                 aria-valuemax="100">
            </div>
            <span class="position-absolute" style="right: 0; top: -5px;">
                <i class="material-icons" style="color: #E79D0D; font-size: 18px;">star</i>
            </span>
        </div>
    </div>

    <main class="panorama-container" role="main">
        <section id="panorama-missoes" class="panorama-section" role="region" aria-label="Panorama de Missões">
            <!-- O conteúdo será carregado dinamicamente pelo JavaScript -->
            <div class="loading-overlay">
                <div class="loading-spinner"></div>
            </div>
            <div class="skeleton-content">
                <div class="mission-cards-grid">
                    <!-- Skeleton cards durante o carregamento -->
                    ${Array(6).fill().map(() => `
                        <div class="mission-card skeleton">
                            <div class="skeleton-text" style="width: 70%; height: 20px;"></div>
                            <div class="skeleton-text" style="width: 90%; height: 16px;"></div>
                            <div class="skeleton-text" style="width: 40%; height: 16px;"></div>
                            <div class="skeleton-button" style="width: 120px; height: 36px;"></div>
                        </div>
                    `).join('')}
                </div>
            </div>
        </section>

        <!-- Nova seção de eventos -->
        <section id="eventos-section" class="eventos-section" role="region" aria-label="Eventos Recentes">
            <div class="eventos-header">
                <h2>Quem está avançando?</h2>
                <p class="eventos-description">
                    Veja as atualizações mais recentes sobre <span class="text-emphasis">missões concluídas</span> e <span class="text-emphasis">envio de evidências</span> pelas prefeituras <span class="text-emphasis">nos últimos 30 dias</span>.
                </p>
            </div>

            <div class="eventos-filters">
                <!-- Filtro de tipo de evento -->
                <div class="filter-group tipo-evento-filter">
                    <label class="filter-label">Mostrando</label>
                    <div class="btn-group" role="group" aria-label="Tipo de Evento">
                        <input type="radio" class="btn-check" name="evento-tipo" id="todos-eventos" autocomplete="off" checked>
                        <label class="btn btn-outline-primary" for="todos-eventos">
                            <i class="fas fa-list me-1"></i> Todos os eventos
                        </label>
                        
                        <input type="radio" class="btn-check" name="evento-tipo" id="mission-completed" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mission-completed">
                            <i class="fas fa-star me-1"></i> Missões concluídas
                        </label>
                        
                        <input type="radio" class="btn-check" name="evento-tipo" id="mission-started" autocomplete="off">
                        <label class="btn btn-outline-primary" for="mission-started">
                            <i class="fas fa-play-circle me-1"></i> Missões iniciadas
                        </label>
                    </div>
                </div>

                <!-- Filtro de município -->
                <div class="filter-group municipio-filter">
                    <label class="filter-label" for="municipio-search">Município</label>
                    <input class="form-control" list="municipios-list" id="municipio-search" placeholder="Digite o nome do município">
                    <datalist id="municipios-list">
                        <!-- Será preenchido dinamicamente -->
                    </datalist>
                </div>

                <!-- Filtro de ordenação -->
                <div class="filter-group order-filter">
                    <label class="filter-label" for="order-select">Ordenar por</label>
                    <div class="select-container">
                        <select class="form-select" id="order-select">
                            <option value="desc" selected>Mais recente</option>
                            <option value="asc">Mais antigo</option>
                        </select>
                        <span class="select-arrow"><i class="fas fa-chevron-down"></i></span>
                    </div>
                </div>
            </div>

            <!-- Conteúdo dos eventos -->
            <div id="eventos-content" class="eventos-content">
                <!-- Será preenchido dinamicamente -->
                <div class="loading-overlay">
                    <div class="loading-spinner"></div>
                </div>
            </div>

            <!-- Paginação -->
            <nav aria-label="Paginação de eventos" class="eventos-pagination">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Anterior">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Próximo">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </section>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <p>&copy; 2023 Pacto Cearense da Primeira Infância. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="data-loader.js"></script>
    <script src="mission-panorama.js"></script>
    
    <!-- Script para carregar os dados localmente para testes -->
    <script>
        // Se estiver trabalhando localmente, podemos usar dados estáticos para testes
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            // Função para carregar os dados a partir do arquivo local
            async function carregarDadosLocais() {
                try {
                    const response = await fetch('mission-panorama-response.json');
                    if (!response.ok) throw new Error('Erro ao carregar dados locais');
                    
                    const data = await response.json();
                    if (data.status === 'success' && data.data) {
                        // Renderizar usando os dados locais
                        renderizarPanoramaMissoes(data.data);
                    }
                } catch (error) {
                    console.error('Erro ao carregar dados locais:', error);
                }
            }
            
            // Substituir a chamada da API por dados locais
            document.addEventListener('DOMContentLoaded', function() {
                carregarDadosLocais();
            });
        }
    </script>
</body>
</html> 